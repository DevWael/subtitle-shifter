@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --bg-primary: #FFFFFF;
    --bg-secondary: #F6F8FA;
    --bg-card: #FFFFFF;
    --border: #E5E7EB;
    --accent: #16A34A;
    --accent-hover: #15803D;
    --text-primary: #1F2937;
    --text-secondary: #6B7280;
    --titlebar-height: 38px;
  }

  .dark {
    --bg-primary: #0D1117;
    --bg-secondary: #161B22;
    --bg-card: #21262D;
    --border: #30363D;
    --accent: #4ADE80;
    --accent-hover: #22C55E;
    --text-primary: #E6EDF3;
    --text-secondary: #8B949E;
  }

  html {
    font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    scroll-behavior: smooth;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    @apply bg-[var(--bg-primary)] text-[var(--text-primary)] transition-colors duration-200;
    min-height: 100vh;
    /* Prevent text selection on UI elements for native feel */
    user-select: none;
  }

  /* Allow text selection in content areas */
  .selectable,
  input,
  textarea,
  .preview-item p {
    user-select: text;
  }
}

@layer components {

  /* Desktop title bar - draggable area for macOS */
  .titlebar {
    -webkit-app-region: drag;
    height: var(--titlebar-height);
    @apply flex items-center justify-between px-4 border-b;
    background: var(--bg-primary);
    border-color: var(--border);
  }

  .titlebar-buttons {
    -webkit-app-region: no-drag;
  }

  /* Main content area with native scroll */
  .app-content {
    height: calc(100vh - var(--titlebar-height));
    overflow-y: auto;
    overflow-x: hidden;
  }

  /* Compact card styles */
  .card {
    @apply rounded-lg p-4 transition-all duration-200;
    background: var(--bg-card);
    border: 1px solid var(--border);
  }

  .dark .card {
    background: rgba(33, 38, 45, 0.95);
  }

  /* Compact button styles */
  .btn {
    @apply px-4 py-2 rounded-md font-medium text-sm transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-offset-1 disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-primary {
    @apply btn text-white;
    background: var(--accent);
  }

  .btn-primary:hover:not(:disabled) {
    background: var(--accent-hover);
  }

  .btn-primary:focus {
    @apply ring-green-500;
  }

  .dark .btn-primary:focus {
    @apply ring-offset-gray-900;
  }

  .btn-secondary {
    @apply btn;
    background: var(--bg-secondary);
    color: var(--text-primary);
    border: 1px solid var(--border);
  }

  .btn-secondary:hover:not(:disabled) {
    background: var(--bg-card);
    border-color: var(--accent);
  }

  /* Compact input styles */
  .input {
    @apply w-full px-3 py-2 rounded-md text-sm transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-1;
    background: var(--bg-secondary);
    border: 1px solid var(--border);
    color: var(--text-primary);
  }

  .input::placeholder {
    color: var(--text-secondary);
  }

  .input:focus {
    border-color: var(--accent);
  }

  /* Compact upload zone */
  .upload-zone {
    @apply border-2 border-dashed rounded-lg p-6 text-center transition-all duration-200 cursor-pointer;
    border-color: var(--border);
    background: var(--bg-secondary);
  }

  .upload-zone:hover,
  .upload-zone.drag-over {
    border-color: var(--accent);
    background: rgba(74, 222, 128, 0.05);
  }

  .dark .upload-zone:hover,
  .dark .upload-zone.drag-over {
    background: rgba(74, 222, 128, 0.1);
  }

  /* Preview section */
  .preview-container {
    @apply max-h-72 overflow-y-auto rounded-lg;
    background: var(--bg-secondary);
    border: 1px solid var(--border);
  }

  .preview-item {
    @apply p-3 border-b transition-colors duration-150;
    border-color: var(--border);
  }

  .preview-item:last-child {
    @apply border-b-0;
  }

  .preview-item:hover {
    background: rgba(74, 222, 128, 0.05);
  }

  .timestamp {
    @apply font-mono text-xs px-1.5 py-0.5 rounded;
    background: rgba(74, 222, 128, 0.15);
    color: var(--accent);
  }

  .timestamp.original {
    @apply line-through opacity-50;
    background: transparent;
    color: var(--text-secondary);
  }

  /* Compact radio buttons for mode selection */
  .mode-option {
    @apply relative flex items-center gap-2 p-3 rounded-lg cursor-pointer transition-all duration-150 text-sm;
    border: 1px solid var(--border);
  }

  .mode-option:hover {
    border-color: var(--accent);
  }

  .mode-option.active {
    border-color: var(--accent);
    background: rgba(74, 222, 128, 0.1);
  }

  /* Loading spinner */
  .spinner {
    @apply w-4 h-4 border-2 rounded-full animate-spin;
    border-color: transparent;
    border-top-color: currentColor;
  }

  /* File info badge */
  .file-badge {
    @apply inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-xs font-medium;
    background: rgba(74, 222, 128, 0.15);
    color: var(--accent);
  }

  /* Compact toast */
  .toast {
    @apply fixed bottom-4 right-4 p-3 rounded-lg shadow-lg z-50 transform transition-all duration-200 text-sm;
    background: var(--bg-card);
    border: 1px solid var(--border);
  }

  .toast.success {
    border-left: 3px solid var(--accent);
  }

  .toast.error {
    border-left: 3px solid #EF4444;
  }

  .toast.hidden {
    @apply opacity-0 translate-y-4 pointer-events-none;
  }

  /* Section headers - more compact */
  .section-header {
    @apply text-sm font-semibold mb-3 flex items-center gap-2;
    color: var(--text-primary);
  }

  .section-header .icon {
    @apply text-base;
  }

  /* Label styling */
  .label {
    @apply block text-xs font-medium mb-1.5;
    color: var(--text-secondary);
  }

  /* Divider */
  .divider {
    @apply border-t my-4;
    border-color: var(--border);
  }

  /* Dual-thumb Range Slider */
  .range-slider-container {
    position: relative;
    height: 24px;
    margin-top: 8px;
  }

  .range-track {
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 6px;
    transform: translateY(-50%);
    background: var(--border);
    border-radius: 3px;
  }

  .range-fill {
    position: absolute;
    height: 100%;
    background: var(--accent);
    border-radius: 3px;
    opacity: 0.6;
  }

  .range-thumb {
    position: absolute;
    top: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    -webkit-appearance: none;
    appearance: none;
    background: transparent;
  }

  .range-thumb::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: var(--accent);
    border: 2px solid var(--bg-primary);
    cursor: grab;
    pointer-events: auto;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
    transition: transform 0.1s ease;
  }

  .range-thumb::-webkit-slider-thumb:hover {
    transform: scale(1.1);
  }

  .range-thumb::-webkit-slider-thumb:active {
    cursor: grabbing;
    transform: scale(1.15);
  }

  .range-thumb::-moz-range-thumb {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: var(--accent);
    border: 2px solid var(--bg-primary);
    cursor: grab;
    pointer-events: auto;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
  }
}

@layer utilities {

  /* Native scrollbar */
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: var(--border) transparent;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 8px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    @apply rounded-full;
    background: var(--border);
  }

  .scrollbar-thin::-webkit-scrollbar-thumb:hover {
    background: var(--text-secondary);
  }

  /* Subtle fade in */
  .fade-in {
    animation: fadeIn 0.15s ease-out;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }

    to {
      opacity: 1;
    }
  }

  /* Slide up animation */
  .slide-up {
    animation: slideUp 0.2s ease-out;
  }

  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(8px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
}